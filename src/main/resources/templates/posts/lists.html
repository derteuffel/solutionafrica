<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Annonces | Solution Africa Sarl</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link th:href="@{/css/pe-icons.css}" rel="stylesheet">
    <link th:href="@{/css/prettyPhoto.css}" rel="stylesheet">
    <link th:href="@{/css/animate.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <script th:src="@{/js/jquery.js}"></script>
    <script th:src="@{/js/html5shiv.js}"></script>
    <script th:src="@{/js/respond.min.js}"></script>
    <link rel="shortcut icon" th:href="@{/images/logo.png}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" th:href="@{/images/ico/apple-touch-icon-144x144.png}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" th:href="@{/images/ico/apple-touch-icon-114x114.png}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" th:href="@{/images/ico/images/ico/apple-touch-icon-72x72.png}">
    <link rel="apple-touch-icon-precomposed" th:href="@{/images/ico/apple-touch-icon-57x57.png}">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>

    <script type="text/javascript">
    jQuery(document).ready(function($){
    'use strict';
        jQuery('body').backstretch([
            "../../images/bg/bg4.jpg",
            "../../images/bg/bg3.jpg",
            "../../images/bg/bg5.jpg"
        ], {duration: 5000, fade: 500});

        $("#mapwrapper").gMap({ controls: false,
            scrollwheel: false,
            markers: [{
                latitude:40.7566,
                longitude: -73.9863,
            icon: { image: "images/marker.png",
                iconsize: [44,44],
                iconanchor: [12,46],
                infowindowanchor: [12, 0] } }],
            icon: {
                image: "images/marker.png",
                iconsize: [26, 46],
                iconanchor: [12, 46],
                infowindowanchor: [12, 0] },
            latitude:40.7566,
            longitude: -73.9863,
            zoom: 14 });
    });
    </script>
</head><!--/head-->
<body>
<div id="preloader"></div>
    <header th:replace="~{../templates/fragments/header :: header}"></header><!--/header-->

    <section id="single-page-slider" class="no-margin">
        <div class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="item active">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="center gap fade-down section-heading">
                                    <h2 class="main-title">Gestion des annonces</h2>
                                    <hr>
                                    <p>Ajouter des annonces pour garder vos visiteurs au courant de vos activites.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!--/.item-->
            </div><!--/.carousel-inner-->
        </div><!--/.carousel-->
    </section><!--/#main-slider-->

    <div id="content-wrapper">
        <section id="blog" class="white">
            <div class="container">
            <div class="gap"></div>
                <div class="row">
                    <span th:text="${success}" class="text-success"></span>
                    <aside class="col-sm-4 col-sm-push-8">
                        <div class="widget search">
                            <button class="btn btn-primary btn-round ml-auto" data-toggle="modal" data-target="#addRowModal">
                                <i class="fa fa-plus"></i>
                                Annonce
                            </button>

                        </div><!--/.search-->


                        <div class="widget categories">
                            <h3 class="widget-title">Categories des annonces</h3>
                            <div class="row">
                                <div class="col-sm-6">
                                    <ul class="arrow">
                                        <li><a th:href="@{/admin/posts/lists/}+${'Fashion'}">Fashion</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Design'}">Design</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Music'}">Music</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Photographie'}">Photographie</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Evenementiel'}">Evenementiel</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-6">
                                    <ul class="arrow">
                                        <li><a th:href="@{/admin/posts/lists/}+${'Web_Design'}">Web Design</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Imprimerie'}">Imprimerie</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Informatique'}">Informatique</a></li>
                                        <li><a th:href="@{/admin/posts/lists/}+${'Autres'}">Autres</a></li>

                                    </ul>
                                </div>
                            </div>
                        </div><!--/.categories-->

                    </aside>
                    <div class="col-sm-8 col-sm-pull-4">
                        <div class="blog">
                            <div class="blog-item">
                                <table id="tab" class="table table-bordered table-responsive">
                                    <thead>
                                        <th>Titre</th>
                                        <th>Date</th>
                                        <th>Image</th>
                                        <th>Description</th>
                                        <th>Mots cles</th>
                                        <th>Actions</th>
                                    </thead>
                                    <tbody>
                                        <tr th:each="item : ${lists}">
                                            <td th:text="${item.title}"></td>
                                            <td th:text="${item.createdDate}"></td>
                                            <td><img th:src="${item.pictureUrl}" height="80" width="80" alt=""></td>
                                            <td th:text="${item.description}"></td>
                                            <td><ul th:each="word : ${item.tags}">
                                                    <li><span th:text="${word}"></span></li>
                                                </ul>
                                            </td>
                                            <td>
                                                <a th:href="@{/admin/posts/update/}+${item.id}" class="text-primary btn"><i class="fa fa-edit"></i></a>
                                                <a th:href="@{/admin/posts/delete/}+${item.id}"  class="text-danger btn delete" data-confirm="Voulez-vous vraiment supprimer cet element?"><i class="fa fa-trash"></i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div><!--/.blog-item-->
                            <!--/.blog-item--><!--/.pagination-->
                        </div>
                    </div><!--/.col-md-8-->
                </div><!--/.row-->
            </div>
        </section><!--/#blog-->
    </div>

<div class="modal fade in" id="addRowModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header no-bd">
                <h5 class="modal-title">
														<span class="fw-mediumbold">
														Formulaire d'une nouvelle</span>
                    <span class="fw-light">
															Annonce
														</span>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form th:action="@{/admin/posts/save}" method="post" th:object="${post}" enctype="multipart/form-data">
                <div class="modal-body">
                    <p class="small">Bien vouloir renseigner les champs ci-dessous pour ajouter une nouvelle annonces</p>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label>Titre :</label>
                                <input id="addPosition" type="text" th:field="*{title}" class="form-control" placeholder="Titre de l'annonce">
                            </div>
                            <div class="form-group form-group-default">
                                <label>Categorie :</label>
                                <select th:field="*{category}" class="form-control" id="">
                                    <option value="" disabled>-- Choisir une categorie --</option>
                                    <option th:value="${item}" th:text="${item}" th:each="item : ${T(com.derteuffel.solutionafrica.enums.Categories).values()}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label >Description :</label>
                                <textarea th:field="*{description}" id="" class="form-control"  rows="4"></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label >Mots cles :</label>
                                <textarea name="tags" id="" class="form-control" placeholder="separer les mots cles par une virgule"  rows="4"></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label for="clientEmail">Photo de couverture :</label>
                                <input type="file" class="form-control-file" id="clientEmail" name="file" >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer no-bd">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fermer</button>
                    <button type="submit"  class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>
    <div th:replace="~{../templates/fragments/footer :: footer}" ><!--/#footer-->
    </div>

    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/jquery.prettyPhoto.js}"></script>
    <script th:src="@{/js/plugins.js}"></script>
    <script th:src="@{/js/init.js}"></script>
<script>
    $(document).ready( function () {
        $('#tab').DataTable();
    } );
</script>
<script>
    var deleteLinks = document.querySelectorAll('.delete');

    for (var i = 0; i < deleteLinks.length; i++) {
        deleteLinks[i].addEventListener('click', function(event) {
            event.preventDefault();

            var choice = confirm(this.getAttribute('data-confirm'));

            if (choice) {
                window.location.href = this.getAttribute('href');
            }
        });
    }
</script>
</body>
</html>
