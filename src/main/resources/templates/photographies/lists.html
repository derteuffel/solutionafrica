<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Photographies | Solution Africa Sarl</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link th:href="@{/css/pe-icons.css}" rel="stylesheet">
    <link th:href="@{/css/prettyPhoto.css}" rel="stylesheet">
    <link th:href="@{/css/animate.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <script th:src="@{/js/jquery.js}"></script>
    <script th:src="@{/js/html5shiv.js}"></script>
    <script th:src="@{/js/respond.min.js}"></script>
    <link rel="shortcut icon" th:href="@{/images/logo.png}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" th:href="@{/images/ico/apple-touch-icon-144x144.png}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" th:href="@{/images/ico/apple-touch-icon-114x114.png}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" th:href="@{/images/ico/images/ico/apple-touch-icon-72x72.png}">
    <link rel="apple-touch-icon-precomposed" th:href="@{/images/ico/apple-touch-icon-57x57.png}">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>

    <script type="text/javascript">
    jQuery(document).ready(function($){
    'use strict';
        jQuery('body').backstretch([
            "../../images/bg/bg4.jpg",
            "../../images/bg/bg3.jpg",
            "../../images/bg/bg5.jpg"
        ], {duration: 5000, fade: 500});

        $("#mapwrapper").gMap({ controls: false,
            scrollwheel: false,
            markers: [{
                latitude:40.7566,
                longitude: -73.9863,
            icon: { image: "../../images/marker.png",
                iconsize: [44,44],
                iconanchor: [12,46],
                infowindowanchor: [12, 0] } }],
            icon: {
                image: "../../images/marker.png",
                iconsize: [26, 46],
                iconanchor: [12, 46],
                infowindowanchor: [12, 0] },
            latitude:40.7566,
            longitude: -73.9863,
            zoom: 14 });
    });
    </script>
</head><!--/head-->
<body>
<div id="preloader"></div>
    <header th:replace="~{../templates/fragments/header :: header}"></header><!--/header-->

    <section id="single-page-slider" class="no-margin">
        <div class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="item active">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="center gap fade-down section-heading">
                                    <h2 class="main-title">Gestion des photographies</h2>
                                    <hr>
                                    <p>Gestion des photos et videos de vos evenements marquant</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!--/.item-->
            </div><!--/.carousel-inner-->
        </div><!--/.carousel-->
    </section><!--/#main-slider-->

    <div id="content-wrapper">
        <section id="blog" class="white">
            <div class="container">
            <div class="gap"></div>
                <div class="row">
                    <span th:text="${success}" class="text-success"></span>
                    <aside class="col-sm-2 col-sm-push-10">
                        <div class="widget search">
                            <button class="btn btn-primary btn-round ml-auto" data-toggle="modal" data-target="#addRowModal">
                                <i class="fa fa-plus"></i>
                                Photo
                            </button>

                        </div><!--/.search-->
                    </aside>
                    <div class="col-sm-10 col-sm-pull-2">
                        <div class="blog">
                            <div class="blog-item">
                                <table id="tab" class="table table-bordered table-responsive">
                                    <thead>
                                        <th>Titre</th>
                                        <th>Date</th>
                                        <th>Image</th>
                                        <th>Categorie</th>
                                        <th>Actions</th>
                                    </thead>
                                    <tbody>
                                        <tr th:each="item : ${lists}">
                                            <td th:text="${item.title}"></td>
                                            <td th:text="${item.releaseDate}"></td>
                                            <td><img th:src="${item.pictureUrl}" height="80" width="80" alt=""></td>
                                            <td th:text="${item.category}"></td>

                                            <td>
                                                <a th:href="@{/admin/photographies/update/}+${item.id}" class="text-primary btn"><i class="fa fa-edit"></i></a>
                                                <a th:href="@{/admin/photographies/delete/}+${item.id}"  class="text-danger btn delete" data-confirm="Voulez-vous vraiment supprimer cet element?"><i class="fa fa-trash"></i></a>
                                                <a th:href="@{/admin/photographies/activate/}+${item.id}" th:if="${item.status}"  class="text-warning btn delete" data-confirm="Voulez-vous desactiver la visibilite externe de cet element?"><i class="fa fa-check"></i></a>
                                                <a th:href="@{/admin/photographies/activate/}+${item.id}" th:unless="${item.status}"  class="text-success btn delete" data-confirm="Voulez-vous activer la visibilite externe de cet element?"><i class="fa fa-check-square"></i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div><!--/.blog-item-->
                            <!--/.blog-item--><!--/.pagination-->
                        </div>
                    </div><!--/.col-md-8-->
                </div><!--/.row-->
            </div>
        </section><!--/#blog-->
    </div>

<div class="modal fade in" id="addRowModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header no-bd">
                <h5 class="modal-title">
														<span class="fw-mediumbold">
														Formulaire d'une nouvelle</span>
                    <span class="fw-light">
															Photo
														</span>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form th:action="@{/admin/photographies/save}" method="post" th:object="${photo}" enctype="multipart/form-data">
                <div class="modal-body">
                    <p class="small">Ajouter votre image</p>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label>Titre :</label>
                                <input id="addPosition" type="text" th:field="*{title}" class="form-control" placeholder="Titre de l'annonce">
                            </div>
                            <div class="form-group form-group-default">
                                <label>Categorie :</label>
                                <select th:field="*{category}" class="form-control" >
                                    <option value="" disabled>-- Choisir une categorie --</option>
                                    <option th:value="${item}" th:text="${item}" th:each="item : ${categories}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label >Realiser le :</label>
                                <input type="date" th:field="*{releaseDate}" class="form-control" placeholder="Date de realisation de cette image">
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group form-group-default">
                                <label >Image/Video :</label>
                                <input type="file" class="form-control-file"  name="file" >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer no-bd">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fermer</button>
                    <button type="submit"  class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>
    <div th:replace="~{../templates/fragments/footer :: footer}" ><!--/#footer-->
    </div>

    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/jquery.prettyPhoto.js}"></script>
    <script th:src="@{/js/plugins.js}"></script>
    <script th:src="@{/js/init.js}"></script>
<script>
    $(document).ready( function () {
        $('#tab').DataTable();
    } );
</script>
<script>
    var deleteLinks = document.querySelectorAll('.delete');

    for (var i = 0; i < deleteLinks.length; i++) {
        deleteLinks[i].addEventListener('click', function(event) {
            event.preventDefault();

            var choice = confirm(this.getAttribute('data-confirm'));

            if (choice) {
                window.location.href = this.getAttribute('href');
            }
        });
    }
</script>
</body>
</html>
